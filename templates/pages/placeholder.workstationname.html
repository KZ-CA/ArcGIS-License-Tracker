{% extends 'layouts/main.html' %}

{% block title %} Workstations {% endblock %}

{% block css %}
{% endblock %}

{% block javascript %}
{% endblock %}

{% block banner %}
    <a href="{{ url_for('workstations') }}" style="color:inherit">Workstations</a> / {{ request.path.split('/')[-1] }}
{% endblock %}

{% block content %}
    <div class="column-16">
        <div class="panel modifier-class trailer-half">
            <div class="panel-header">Product Usage</div>
            {% if product_usage %}
                <table class="modifier-class display sortable-table" id="ws-products" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th data-sort="string">Active</th>
                        <th data-sort="string">Product</th>
                        <th data-sort="string">License Server</th>
                        <th data-sort="string">Type</th>
                        <th data-sort="int">Total Time (min)</th>
                        <th data-sort="string">Last Use</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for p in product_usage %}
                        <tr>
                            {% if p[4] == 'Y' %}
                                <td><span class="icon-ui-check-mark icon-ui-green font-size-1"></span></td>
                            {% else %}
                                <td></td>
                            {% endif %}
                            <td>
                                <a href="{{ url_for('productname',servername=p[1], productname=p[0]) }}">{{ p[0] | replace('-',' ') }}</a>
                            </td>
                            <td><a href="{{ url_for('servername', servername=p[1]) }}">{{ p[1] }}</a></td>
                            <td>{{ p[2] }}</td>
                            <td>{{ p[3] }}</td>
                            <td>{{ p[5] }}</td>
                        </tr>
                    {% endfor %}
                </table>
                </tbody>
            {% else %}
                No product usage found.
            {% endif %}
        </div>
    </div>
    <div class="column-8">
        <div class="panel modifier-class trailer-half">
            <div class="panel-header">License Server Usage</div>
            {% if license_server_usage %}
                <table class="modifier-class display sortable-table" id="ws-server" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th data-sort="string">Server</th>
                        <th data-sort="int">Total Time (min)</th>
                    </tr>
                    </thead>
                    {% for l in license_server_usage %}
                        <tr>
                            <td><a href="{{ url_for('servername', servername=l[0]) }}">{{ l[0] }}</a></td>
                            <td>{{ l[1] }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>No license server history.</p>
            {% endif %}
        </div>

        <div class="panel modifier-class trailer-half">
            <div class="panel-header">Users</div>
            {% if users %}
                <table class="modifier-class display sortable-table" id="ws-workstation" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th data-sort="string">User</th>
                        <th data-sort="int">Total Time (min)</th>
                    </tr>
                    </thead>
                    {% for u in users %}
                        <tr>
                            <td><a href="{{ url_for('username', username=u[0]) }}">{{ u[0] }}</a></td>
                            <td>{{ u[1] }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>No license workstation history.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}